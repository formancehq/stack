name: Default - Release
on:
  release:
    types: [prereleased, released]

jobs:
  OpenAPI:
    uses: ./.github/workflows/service_release_openapi.yaml
    with:
      GITHUB_EVENT_NAME: release
      GITHUB_EVENT_ACTION: ${{ github.event.action }}
    secrets:
      NUMARY_GITHUB_TOKEN: ${{ secrets.NUMARY_GITHUB_TOKEN }}

  Wallets:
    uses: ./.github/workflows/service.yaml
    with:
      SERVICE_NAME: wallets
      GITHUB_EVENT_NAME: release
      GITHUB_EVENT_ACTION: ${{ github.event.action }}
    secrets:
      NUMARY_GITHUB_TOKEN: ${{ secrets.NUMARY_GITHUB_TOKEN }}

  Search:
    uses: ./.github/workflows/service.yaml
    with:
      SERVICE_NAME: search
      GITHUB_EVENT_NAME: release
      GITHUB_EVENT_ACTION: ${{ github.event.action }}
    secrets:
      NUMARY_GITHUB_TOKEN: ${{ secrets.NUMARY_GITHUB_TOKEN }}

  Fctl:
    uses: ./.github/workflows/service.yaml
    with:
      SERVICE_NAME: fctl
      GITHUB_EVENT_NAME: release
      GITHUB_EVENT_ACTION: ${{ github.event.action }}
    secrets:
      NUMARY_GITHUB_TOKEN: ${{ secrets.NUMARY_GITHUB_TOKEN }}

  Auth:
    uses: ./.github/workflows/service.yaml
    with:
      SERVICE_NAME: auth
      GITHUB_EVENT_NAME: release
      GITHUB_EVENT_ACTION: ${{ github.event.action }}
    secrets:
      NUMARY_GITHUB_TOKEN: ${{ secrets.NUMARY_GITHUB_TOKEN }}

#  Ledger:
#    uses: ./.github/workflows/service.yaml
#    with:
#      SERVICE_NAME: ledger
#      GITHUB_EVENT_NAME: release
#      GITHUB_EVENT_ACTION: ${{ github.event.action }}

  Payments:
    uses: ./.github/workflows/service.yaml
    with:
      SERVICE_NAME: payments
      GITHUB_EVENT_NAME: release
      GITHUB_EVENT_ACTION: ${{ github.event.action }}
    secrets:
      NUMARY_GITHUB_TOKEN: ${{ secrets.NUMARY_GITHUB_TOKEN }}

  Webhooks:
    uses: ./.github/workflows/service.yaml
    with:
      SERVICE_NAME: webhooks
      GITHUB_EVENT_NAME: release
      GITHUB_EVENT_ACTION: ${{ github.event.action }}
    secrets:
      NUMARY_GITHUB_TOKEN: ${{ secrets.NUMARY_GITHUB_TOKEN }}
