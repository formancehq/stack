# https://taskfile.dev

version: '3'

includes:
  openapi:
    taskfile: ./services/openapi/Taskfile.yaml
    dir: ./services/openapi
    optional: true

vars:
  COMPOSE_FILE: -f docker-compose.yml

tasks:
  stack:run:
    cmds:
      - docker-compose {{.COMPOSE_FILE}} up -d --remove-orphans
  stack:stop:
    cmds:
      - docker-compose {{.COMPOSE_FILE}} stop
  stack:ps:
    cmds:
      - docker-compose {{.COMPOSE_FILE}} ps
  stack:rm:
    deps:
      - stop
    cmds:
      - docker-compose {{.COMPOSE_FILE}} rm -f
      - docker volume prune -f